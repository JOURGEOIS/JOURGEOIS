import{H as Z}from"./HeaderBasic.ac1a7e60.js";import{d as H,h as S,m as g,r as o,o as r,c as m,e as C,l,g as I,F as K,i as ee,t as te,u as N,$ as ue,q as B,K as ae,z as k,k as O,N as oe,a0 as se,P as ne,x as re,y as le,_ as W,a1 as z,A as ie,s as L,S as ce,C as Ce,W as de}from"./index.b8a0ac78.js";import{R as me}from"./RoundImage.d46a7b48.js";import{I as M}from"./InputBasic.22711aa7.js";import{_ as pe}from"./ButtonBasic.vue_vue_type_script_setup_true_lang.200855d0.js";import{c as fe}from"./checkUserInfo.380458af.js";import{c as ge,a as R,b as _e}from"./image.3fc243e7.js";import{N as he}from"./NavBar.f319fd8d.js";const $=_=>(re("data-v-b9df2d57"),_=_(),le(),_),ve=["onSubmit"],Be={class:"user-info-change-image"},Ie=$(()=>C("label",{for:"my-profile-image"},"\uD504\uB85C\uD544 \uC0AC\uC9C4 \uBCC0\uACBD",-1)),ke={key:0,class:"change-error-message"},De=$(()=>C("p",null,"\uC774\uB984\uC740 \uD55C\uAE00 \uB610\uB294 \uC601\uC5B4\uB9CC \uC785\uB825\uC774 \uAC00\uB2A5\uD569\uB2C8\uB2E4.",-1)),ye=[De],be={key:1,class:"change-error-message"},Ee={key:2,class:"change-error-message"},Se=$(()=>C("p",null,"\uC911\uBCF5\uB41C \uB2C9\uB124\uC784\uC785\uB2C8\uB2E4.",-1)),Ne=[Se],Ue=k(" \uD655\uC778 "),Ve=H({__name:"TheUserInfoChangeForm",setup(_){const u=O(),i=S(()=>u.getters["personalInfo/getUserInfo"]),h=i.value.name,p=i.value.nickname,v=i.value.profileImg,c=i.value.introduce,a=g({image:v,width:"112px"}),U=g({button:!0,id:"my-change-name-input",label:"\uC774\uB984",type:"text"}),s=o(h),V=o("normal"),F=o(!1),q=g({button:!0,id:"my-change-nickname-input",label:"\uB2C9\uB124\uC784",type:"text",maxlength:12}),n=o(p),D=o("normal"),y=o(!1),j=g({button:!0,id:"my-change-introduce-input",label:"\uD55C\uC904 \uC18C\uAC1C",type:"text",maxlength:20}),b=c?o(c):o(""),w=o("normal"),G=S(()=>s.value!==""&&n.value!==""?"primary":"unchecked"),J="\uB2C9\uB124\uC784\uC740 2\uC790 \uC774\uC0C1 12\uC790 \uC774\uD558\uC785\uB2C8\uB2E4.",Q="\uBE44\uC18D\uC5B4\uB098 \uD0C0\uC778\uC744 \uBE44\uBC29\uD558\uB294 \uD45C\uD604\uC740 \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.",E=g([]),x=o(!1);let A=g({});const X=d=>{let e=d.target.files[0];if(!e||!ge(e.name)){u.dispatch("modal/changeErrorModalMessage","\uC62C\uBC14\uB978 \uC774\uBBF8\uC9C0 \uD30C\uC77C\uC744 \uC5C5\uB85C\uB4DC \uD558\uC138\uC694."),u.dispatch("modal/blinkErrorModalAppStatus",!0);return}if(!R({max:5,fileSize:e.size}))_e(e).then(t=>{if(R({max:10,fileSize:t.size})){e=t,A=t;const f={imageFile:e,profileImage:a};u.dispatch("personalInfo/changeProfileImage",f);return}else{u.dispatch("modal/changeErrorModalMessage","\uC774\uBBF8\uC9C0\uAC00 \uB108\uBB34 \uD07D\uB2C8\uB2E4."),u.dispatch("modal/blinkErrorModalAppStatus");return}});else{A=e;const t={imageFile:e,profileImage:a};u.dispatch("personalInfo/changeProfileImage",t)}},P=d=>u.dispatch("personalInfo/submitChangeUserInfoForm",d),Y=()=>{E.length=0,V.value="normal",D.value="normal",w.value="normal",F.value=!1,y.value=!1,x.value=!1;const d=oe(s.value),e=se(n.value),t=!ne(n.value),f={name:s.value,nickname:n.value,profileLink:A,introduce:b.value};if(d&&e&&t)if(n.value===p)P(f);else{let T;(async()=>{T=await fe(n.value)})().then(()=>{T?P(f):x.value=!0})}else d||(V.value="error",F.value=!0),e||(D.value="error",y.value=!0,E.push(J)),t||(D.value="error",y.value=!0,E.push(Q))};return(d,e)=>(r(),m("form",{class:"user-info-change-form",onSubmit:ae(Y,["prevent"])},[C("div",Be,[l(me,{"round-image":a},null,8,["round-image"]),Ie,C("input",{type:"file",id:"my-profile-image",onChange:X,accept:"image/*"},null,32)]),l(M,{"input-style":V.value,data:U,modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value=t),modelModifiers:{trim:!0}},null,8,["input-style","data","modelValue"]),F.value?(r(),m("div",ke,ye)):I("",!0),l(M,{"input-style":D.value,data:q,modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=t=>n.value=t),modelModifiers:{trim:!0}},null,8,["input-style","data","modelValue"]),y.value?(r(),m("div",be,[(r(!0),m(K,null,ee(E,(t,f)=>(r(),m("p",{key:f},te(t),1))),128))])):I("",!0),x.value?(r(),m("div",Ee,Ne)):I("",!0),l(M,{"input-style":w.value,data:j,modelValue:N(b),"onUpdate:modelValue":e[2]||(e[2]=t=>ue(b)?b.value=t:null),modelModifiers:{trim:!0}},null,8,["input-style","data","modelValue"]),l(pe,{"button-style":[N(G),"long","small"],disabled:s.value==""||n.value==""},{default:B(()=>[Ue]),_:1},8,["button-style","disabled"])],40,ve))}});const Fe=W(Ve,[["__scopeId","data-v-b9df2d57"]]),xe={class:"change-user-info-view"},Ae=k(" \uD68C\uC6D0 \uC815\uBCF4 \uC218\uC815 "),Me={class:"top-view"},$e={class:"change-user-info-link"},we=k("\uD68C\uC6D0\uD0C8\uD1F4"),Pe=k(" \uC131\uACF5\uC801\uC73C\uB85C \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4 "),Te=k(" \uC7A0\uC2DC \uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694 "),ze=H({__name:"TheChangeUserView",setup(_){const u=O();u.dispatch("navbar/setNavIconStatus",4);const i=S(()=>u.getters["account/getUserInfoChangeSuccess"]),h=c=>u.dispatch("account/toggleUserInfoChangeSuccess",c),p=S(()=>u.getters["account/getUserInfoChangeError"]),v=c=>{u.dispatch("account/toggleUserInfoChangeError",c)};return z(p,()=>{p.value&&setTimeout(()=>{v(!1)},2e3)}),z(i,()=>{i.value&&setTimeout(()=>{h(!1)},2e3)}),ie(()=>{h(!1),v(!1)}),(c,a)=>{const U=de("router-link");return r(),m(K,null,[C("div",xe,[l(Z,{prev:!0,success:!1,onPrevClicked:a[0]||(a[0]=s=>c.$router.go(-1))},{default:B(()=>[Ae]),_:1}),C("section",Me,[l(Fe),C("div",$e,[l(U,{to:"/user/sign-out"},{default:B(()=>[we]),_:1})])])]),N(i)?(r(),L(ce,{key:0,onOffModal:a[1]||(a[1]=s=>h(!1))},{default:B(()=>[Pe]),_:1})):I("",!0),N(p)?(r(),L(Ce,{key:1,onOffModal:a[2]||(a[2]=s=>v(!1))},{default:B(()=>[Te]),_:1})):I("",!0),l(he)],64)}}});const Je=W(ze,[["__scopeId","data-v-07be93c6"]]);export{Je as default};
