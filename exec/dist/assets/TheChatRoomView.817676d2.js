import{H as j}from"./HeaderBasic.ac1a7e60.js";import{N as b}from"./NavBar.f319fd8d.js";import{d as F,h as g,u as p,o as i,c as u,l as C,e as t,t as v,k as I,j as w,G as k,_ as f,F as y,i as L,m as B,r as R,w as T,a3 as N,K as E,v as V,p as $,a6 as U,x as D,y as M,R as A,A as P,q as z,z as H}from"./index.b8a0ac78.js";import{R as q}from"./RoundImage.d46a7b48.js";const G={key:0,class:"you the-chat-room-chat-item"},K={class:"the-chat-room-chat-item-content"},J={class:"the-chat-room-chat-item-part"},O={class:"the-chat-room-chat-item-message"},Q={class:"the-chat-room-chat-item-time"},W={key:1,class:"me the-chat-room-chat-item"},X={class:"the-chat-room-chat-item-time"},Y={class:"the-chat-room-chat-item-message"},Z=F({__name:"TheChatRoomChatListItem",props:{chatLog:null},setup(s){const r=s,e=I(),h=w(),c=k(),a=g(()=>{const m=new Date(r.chatLog.timestamp.seconds*1e3).toLocaleTimeString();return m.slice(0,m.length-3)}),d=g(()=>e.getters["chatRoom/getCurrentChatRoom"]).value.opponent,o=g(()=>e.getters["personalInfo/getUserInfoUserId"]),l=g(()=>r.chatLog.sender===Number(o.value)),n=()=>{h.push({name:"TheUserProfileView",params:{userId:c.params.userId}})};return(_,m)=>p(l)?(i(),u("div",W,[t("p",X,v(p(a)),1),t("div",Y,[t("p",null,v(s.chatLog.message),1)])])):(i(),u("div",G,[C(q,{"round-image":{image:p(d).img},onClick:n,class:"the-chat-room-chat-item-image"},null,8,["round-image"]),t("div",K,[t("p",{class:"the-chat-room-chat-item-name",onClick:n},v(p(d).nickname),1),t("div",J,[t("div",O,[t("p",null,v(s.chatLog.message),1)]),t("p",Q,v(p(a)),1)])])]))}});const tt=f(Z,[["__scopeId","data-v-ac6d5da4"]]),et={class:"the-chat-room-chat-list"},ot=F({__name:"TheChatRoomChatList",setup(s){const r=I(),e=g(()=>r.getters["chatRoom/getChatLogs"]);return(h,c)=>(i(),u("div",et,[(i(!0),u(y,null,L(p(e),a=>(i(),u("article",{key:`${a.timestamp.seconds}-${a.timestamp.nanoseconds}`},[C(tt,{"chat-log":a},null,8,["chat-log"])]))),128))]))}});const st=f(ot,[["__scopeId","data-v-6d9e464d"]]),x=s=>(D("data-v-821eecf4"),s=s(),M(),s),at=["onSubmit"],ct=x(()=>t("span",{class:"material-icons-outlined"}," add_reaction ",-1)),nt=[ct],it=x(()=>t("button",{class:"the-chat-room-form-submit"},[t("span",{class:"material-icons"}," send ")],-1)),ut={class:"the-chat-room-emoji"},rt=["onClick"],ht=F({__name:"TheChatRoomChatInput",emits:["clickEmoji"],setup(s,{emit:r}){const e=k(),h=B(["\u{1F600}","\u{1F601}","\u{1F602}","\u{1F923}","\u{1F603}","\u{1F604}","\u{1F605}","\u{1F606}","\u{1F609}","\u{1F60A}","\u{1F60B}","\u{1F60E}","\u{1F60D}","\u{1F618}","\u{1F970}","\u{1F617}","\u{1F619}","\u{1F61A}","\u{1F642}","\u{1F917}","\u{1F929}","\u{1F914}","\u{1F928}","\u{1F610}","\u{1F611}","\u{1F636}","\u{1F644}","\u{1F60F}","\u{1F623}","\u{1F625}","\u{1F62E}","\u{1F910}","\u{1F62F}","\u{1F62A}","\u{1F62B}"]),c=R(!1),a=n=>{o.value=o.value+n},d=()=>{c.value=!c.value,r("clickEmoji")},o=R(""),l=()=>{const n=o.value.trim();if(!n){o.value="";return}const _={receiver:Number(e.params.userId),message:n};U.dispatch("chatRoom/sendNewChat",_),o.value=""};return(n,_)=>(i(),u("section",{class:$(["the-chat-room-form",{active:c.value}])},[t("form",{onSubmit:E(l,["prevent"])},[T(t("input",{type:"text",maxlength:"60",placeholder:"\uBA54\uC138\uC9C0\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694","onUpdate:modelValue":_[0]||(_[0]=m=>o.value=m)},null,512),[[N,o.value]]),t("div",{class:"the-chat-room-form-emoji",onClick:d},nt),it],40,at),T(t("div",ut,[(i(!0),u(y,null,L(h,(m,S)=>(i(),u("div",{key:`emoji-${S}`,onClick:pt=>a(m),class:"the-chat-room-emoji-item"},v(m),9,rt))),128))],512),[[V,c.value]])],2))}});const mt=f(ht,[["__scopeId","data-v-821eecf4"]]),dt={class:"chat-room-view"},lt=H(" \uCC44\uD305 "),_t=F({__name:"TheChatRoomView",setup(s){w();const r=k(),e=I();e.dispatch("navbar/setNavIconStatus",0);const h=R(!1),c=()=>{h.value=!h.value},a=r.params.userId;e.dispatch("chatRoom/setCurrentChatUserId",a),e.dispatch("chatRoom/setChatLogs");const d={chatRoomId:"",opponent:{uid:0,img:"",nickname:""},lastMessage:{chatRoomId:"",sender:0,receiver:0,message:"",isRead:!0,timestamp:{seconds:0,nanos:0}},hasNewMessage:!1};return A(()=>{e.dispatch("chatRoom/checkChatDetail"),e.dispatch("chatRoom/resetChatRoomLogs"),e.dispatch("chatRoom/setCurrentChatRoom",d),document.body.style.overflow="unset"}),P(()=>{setTimeout(()=>{window.scrollTo({left:0,top:100})},0),document.body.style.overflow="hidden"}),(o,l)=>(i(),u(y,null,[t("div",dt,[C(j,{prev:!0,success:!1,onPrevClicked:l[0]||(l[0]=n=>o.$router.go(-1))},{default:z(()=>[lt]),_:1}),t("section",{class:$(["chat-room-section",{active:h.value}])},[C(st),C(mt,{onClickEmoji:c})],2)]),C(b)],64))}});const ft=f(_t,[["__scopeId","data-v-7e1d1888"]]);export{ft as default};
